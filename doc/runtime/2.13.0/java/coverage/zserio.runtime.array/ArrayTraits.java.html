<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ArrayTraits.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Zserio Java Runtime Library</a> &gt; <a href="index.source.html" class="el_package">zserio.runtime.array</a> &gt; <span class="el_source">ArrayTraits.java</span></div><h1>ArrayTraits.java</h1><pre class="source lang-java linenums">package zserio.runtime.array;

import java.io.IOException;
import java.math.BigInteger;

import zserio.runtime.BitSizeOfCalculator;
import zserio.runtime.SizeOf;
import zserio.runtime.PackableSizeOf;
import zserio.runtime.array.ArrayElement.IntegralArrayElement;
import zserio.runtime.io.BitBuffer;
import zserio.runtime.io.BitStreamReader;
import zserio.runtime.io.BitStreamWriter;
import zserio.runtime.io.Writer;
import zserio.runtime.io.PackableWriter;

/**
 * Interface for array traits.
 *
 * Array traits provides an implementation of zserio functions for one element given by index and raw array.
 */
public interface ArrayTraits
{
    /**
     * Checks if bit size of the array elements is always the same.
     *
     * @return true if bit size of the array elements is constant.
     */
    public boolean isBitSizeOfConstant();

    /**
     * Gets packed array traits.
     *
     * @return Instance of packed array traits or null if the array is not packable.
     */
    public PackedArrayTraits getPackedArrayTraits();

    /**
     * Gets the bit size of the array element if it is stored in the bit stream.
     *
     * @param bitPosition Current bit position in the bit stream.
     * @param element     Array element.
     *
     * @return Bit size of the given array element if it is stored in the bit stream.
     */
    public int bitSizeOf(long bitPosition, ArrayElement element);

    /**
     * Initializes indexed offsets for the array element.
     *
     * @param bitPosition Current bit position in the bit stream.
     * @param element     Array element.
     *
     * @return Updated bit stream position which points to the first bit after the array element.
     */
    public long initializeOffsets(long bitPosition, ArrayElement element);

    /**
     * Reads the array element from the bit stream.
     *
     * @param reader Bit stream reader to read from.
     * @param index  Index of the array element to read.
     *
     * @return Array element filled by read element.
     *
     * @throws IOException Failure during bit stream manipulation.
     */
    public ArrayElement read(BitStreamReader reader, int index) throws IOException;

    /**
     * Writes the array element to the bit stream.
     *
     * @param writer  Bit stream write to write to.
     * @param element Array element.
     *
     * @throws IOException Failure during bit stream manipulation.
     */
    public void write(BitStreamWriter writer, ArrayElement element) throws IOException;

    /**
     * Interface for integral array traits.
     */
    public static interface IntegralArrayTraits extends ArrayTraits
    {
        /**
         * Creates integral array element from given big integer value.
         *
         * @param value Big integer value of the element to create.
         *
         * @return Integral array element.
         */
        public IntegralArrayElement fromBigInteger(BigInteger value);

        /**
         * Gets the bit size of the array element if it is stored in the bit stream.
         *
         * @param element     Array element.
         *
         * @return Bit size of the given array element if it is stored in the bit stream.
         */
        public int bitSizeOf(ArrayElement element);

        /**
         * Reads the array element from the bit stream.
         *
         * @param reader Bit stream reader to read from.
         *
         * @return Array element filled by read element.
         *
         * @throws IOException Failure during bit stream manipulation.
         */
        public IntegralArrayElement read(BitStreamReader reader) throws IOException;
    }

    /**
     * Implementation of common integral array traits functionality.
     */
    public static abstract class IntegralArrayTraitsBase implements IntegralArrayTraits
    {
        /**
         * Constructor.
         */
        public IntegralArrayTraitsBase()
<span class="fc" id="L123">        {</span>
<span class="fc" id="L124">            this.packedArrayTraits = new PackedArrayTraits.IntegralPackedArrayTraits(this);</span>
<span class="fc" id="L125">        }</span>

        @Override
        public PackedArrayTraits getPackedArrayTraits()
        {
<span class="fc" id="L130">            return packedArrayTraits;</span>
        }

        @Override
        public int bitSizeOf(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L136">            return bitSizeOf(element);</span>
        }

        @Override
        public IntegralArrayElement read(BitStreamReader reader, int index) throws IOException
        {
<span class="fc" id="L142">            return read(reader);</span>
        }

        private final PackedArrayTraits packedArrayTraits;
    }

    /**
     * Array traits for zserio int8 and int:1...int:8 arrays which are mapped to Java byte[] array.
     */
    public static final class SignedBitFieldByteArrayTraits extends IntegralArrayTraitsBase
    {
        /**
         * Constructor from number of bits of zserio type.
         *
         * @param numBits Number of bits of zserio type.
         */
        public SignedBitFieldByteArrayTraits(int numBits)
<span class="fc" id="L159">        {</span>
<span class="fc" id="L160">            this.numBits = numBits;</span>
<span class="fc" id="L161">        }</span>

        @Override
        public boolean isBitSizeOfConstant()
        {
<span class="fc" id="L166">            return true;</span>
        }

        @Override
        public int bitSizeOf(ArrayElement element)
        {
<span class="fc" id="L172">            return numBits;</span>
        }

        @Override
        public long initializeOffsets(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L178">            return bitPosition + bitSizeOf(bitPosition, element);</span>
        }

        @Override
        public IntegralArrayElement read(BitStreamReader reader) throws IOException
        {
<span class="fc" id="L184">            return new ArrayElement.ByteArrayElement((byte)reader.readSignedBits(numBits));</span>
        }

        @Override
        public void write(BitStreamWriter writer, ArrayElement element) throws IOException
        {
<span class="fc" id="L190">            writer.writeSignedBits(((ArrayElement.ByteArrayElement)element).get(), numBits);</span>
<span class="fc" id="L191">        }</span>

        @Override
        public IntegralArrayElement fromBigInteger(BigInteger bigInteger)
        {
<span class="fc" id="L196">            return new ArrayElement.ByteArrayElement(bigInteger.byteValue());</span>
        }

        private final int numBits;
    }

    /**
     * Array traits for zserio int16 and int:9...int:16 arrays which are mapped to Java short[] array.
     */
    public static final class SignedBitFieldShortArrayTraits extends IntegralArrayTraitsBase
    {
        /**
         * Constructor from number of bits of zserio type.
         *
         * @param numBits Number of bits of zserio type.
         */
        public SignedBitFieldShortArrayTraits(int numBits)
<span class="fc" id="L213">        {</span>
<span class="fc" id="L214">            this.numBits = numBits;</span>
<span class="fc" id="L215">        }</span>

        @Override
        public boolean isBitSizeOfConstant()
        {
<span class="fc" id="L220">            return true;</span>
        }

        @Override
        public int bitSizeOf(ArrayElement element)
        {
<span class="fc" id="L226">            return numBits;</span>
        }

        @Override
        public long initializeOffsets(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L232">            return bitPosition + bitSizeOf(bitPosition, element);</span>
        }

        @Override
        public IntegralArrayElement read(BitStreamReader reader) throws IOException
        {
<span class="fc" id="L238">            return new ArrayElement.ShortArrayElement((short)reader.readSignedBits(numBits));</span>
        }

        @Override
        public void write(BitStreamWriter writer, ArrayElement element) throws IOException
        {
<span class="fc" id="L244">            writer.writeSignedBits(((ArrayElement.ShortArrayElement)element).get(), numBits);</span>
<span class="fc" id="L245">        }</span>

        @Override
        public IntegralArrayElement fromBigInteger(BigInteger bigInteger)
        {
<span class="fc" id="L250">            return new ArrayElement.ShortArrayElement(bigInteger.shortValue());</span>
        }

        private final int numBits;
    }

    /**
     * Array traits for zserio int32 and int:17...int:32 arrays which are mapped to Java int[] array.
     */
    public static final class SignedBitFieldIntArrayTraits extends IntegralArrayTraitsBase
    {
        /**
         * Constructor from number of bits of zserio type.
         *
         * @param numBits Number of bits of zserio type.
         */
        public SignedBitFieldIntArrayTraits(int numBits)
<span class="fc" id="L267">        {</span>
<span class="fc" id="L268">            this.numBits = numBits;</span>
<span class="fc" id="L269">        }</span>

        @Override
        public boolean isBitSizeOfConstant()
        {
<span class="fc" id="L274">            return true;</span>
        }

        @Override
        public int bitSizeOf(ArrayElement element)
        {
<span class="fc" id="L280">            return numBits;</span>
        }

        @Override
        public long initializeOffsets(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L286">            return bitPosition + bitSizeOf(bitPosition, element);</span>
        }

        @Override
        public IntegralArrayElement read(BitStreamReader reader) throws IOException
        {
<span class="fc" id="L292">            return new ArrayElement.IntArrayElement((int)reader.readSignedBits(numBits));</span>
        }

        @Override
        public void write(BitStreamWriter writer, ArrayElement element) throws IOException
        {
<span class="fc" id="L298">            writer.writeSignedBits(((ArrayElement.IntArrayElement)element).get(), numBits);</span>
<span class="fc" id="L299">        }</span>

        @Override
        public IntegralArrayElement fromBigInteger(BigInteger bigInteger)
        {
<span class="fc" id="L304">            return new ArrayElement.IntArrayElement(bigInteger.intValue());</span>
        }

        private final int numBits;
    }

    /**
     * Array traits for zserio int64 and int:33...int:64 arrays which are mapped to Java long[] array.
     */
    public static final class SignedBitFieldLongArrayTraits extends IntegralArrayTraitsBase
    {
        /**
         * Constructor from number of bits of zserio type.
         *
         * @param numBits Number of bits of zserio type.
         */
        public SignedBitFieldLongArrayTraits(int numBits)
<span class="fc" id="L321">        {</span>
<span class="fc" id="L322">            this.numBits = numBits;</span>
<span class="fc" id="L323">        }</span>

        @Override
        public boolean isBitSizeOfConstant()
        {
<span class="fc" id="L328">            return true;</span>
        }

        @Override
        public int bitSizeOf(ArrayElement element)
        {
<span class="fc" id="L334">            return numBits;</span>
        }

        @Override
        public long initializeOffsets(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L340">            return bitPosition + bitSizeOf(bitPosition, element);</span>
        }

        @Override
        public IntegralArrayElement read(BitStreamReader reader) throws IOException
        {
<span class="fc" id="L346">            return new ArrayElement.LongArrayElement(reader.readSignedBits(numBits));</span>
        }

        @Override
        public void write(BitStreamWriter writer, ArrayElement element) throws IOException
        {
<span class="fc" id="L352">            writer.writeSignedBits(((ArrayElement.LongArrayElement)element).get(), numBits);</span>
<span class="fc" id="L353">        }</span>

        @Override
        public IntegralArrayElement fromBigInteger(BigInteger bigInteger)
        {
<span class="fc" id="L358">            return new ArrayElement.LongArrayElement(bigInteger.longValue());</span>
        }

        private final int numBits;
    }

    /**
     * Array traits for zserio bit:1...bit:7 arrays which are mapped to Java byte[] array.
     */
    public static final class BitFieldByteArrayTraits extends IntegralArrayTraitsBase
    {
        /**
         * Constructor from number of bits of zserio type.
         *
         * @param numBits Number of bits of zserio type.
         */
        public BitFieldByteArrayTraits(int numBits)
<span class="fc" id="L375">        {</span>
<span class="fc" id="L376">            this.numBits = numBits;</span>
<span class="fc" id="L377">        }</span>

        @Override
        public boolean isBitSizeOfConstant()
        {
<span class="fc" id="L382">            return true;</span>
        }

        @Override
        public int bitSizeOf(ArrayElement element)
        {
<span class="fc" id="L388">            return numBits;</span>
        }

        @Override
        public long initializeOffsets(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L394">            return bitPosition + bitSizeOf(bitPosition, element);</span>
        }

        @Override
        public IntegralArrayElement read(BitStreamReader reader) throws IOException
        {
<span class="fc" id="L400">            return new ArrayElement.ByteArrayElement((byte)reader.readBits(numBits));</span>
        }

        @Override
        public void write(BitStreamWriter writer, ArrayElement element) throws IOException
        {
<span class="fc" id="L406">            writer.writeBits(((ArrayElement.ByteArrayElement)element).get(), numBits);</span>
<span class="fc" id="L407">        }</span>

        @Override
        public IntegralArrayElement fromBigInteger(BigInteger bigInteger)
        {
<span class="fc" id="L412">            return new ArrayElement.ByteArrayElement(bigInteger.byteValue());</span>
        }

        private final int numBits;
    }

    /**
     * Array traits for zserio uint8 and bit:8...bit:15 arrays which are mapped to Java short[] array.
     */
    public static final class BitFieldShortArrayTraits extends IntegralArrayTraitsBase
    {
        /**
         * Constructor from number of bits of zserio type.
         *
         * @param numBits Number of bits of zserio type.
         */
        public BitFieldShortArrayTraits(int numBits)
<span class="fc" id="L429">        {</span>
<span class="fc" id="L430">            this.numBits = numBits;</span>
<span class="fc" id="L431">        }</span>

        @Override
        public boolean isBitSizeOfConstant()
        {
<span class="fc" id="L436">            return true;</span>
        }

        @Override
        public int bitSizeOf(ArrayElement element)
        {
<span class="fc" id="L442">            return numBits;</span>
        }

        @Override
        public long initializeOffsets(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L448">            return bitPosition + bitSizeOf(bitPosition, element);</span>
        }

        @Override
        public IntegralArrayElement read(BitStreamReader reader) throws IOException
        {
<span class="fc" id="L454">            return new ArrayElement.ShortArrayElement((short)reader.readBits(numBits));</span>
        }

        @Override
        public void write(BitStreamWriter writer, ArrayElement element) throws IOException
        {
<span class="fc" id="L460">            writer.writeBits(((ArrayElement.ShortArrayElement)element).get(), numBits);</span>
<span class="fc" id="L461">        }</span>

        @Override
        public IntegralArrayElement fromBigInteger(BigInteger bigInteger)
        {
<span class="fc" id="L466">            return new ArrayElement.ShortArrayElement(bigInteger.shortValue());</span>
        }

        private final int numBits;
    }

    /**
     * Array traits for zserio uint16 and bit:16...bit:31 arrays which are mapped to Java int[] array.
     */
    public static final class BitFieldIntArrayTraits extends IntegralArrayTraitsBase
    {
        /**
         * Constructor from number of bits of zserio type.
         *
         * @param numBits Number of bits of zserio type.
         */
        public BitFieldIntArrayTraits(int numBits)
<span class="fc" id="L483">        {</span>
<span class="fc" id="L484">            this.numBits = numBits;</span>
<span class="fc" id="L485">        }</span>

        @Override
        public boolean isBitSizeOfConstant()
        {
<span class="fc" id="L490">            return true;</span>
        }

        @Override
        public int bitSizeOf(ArrayElement element)
        {
<span class="fc" id="L496">            return numBits;</span>
        }

        @Override
        public long initializeOffsets(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L502">            return bitPosition + bitSizeOf(bitPosition, element);</span>
        }

        @Override
        public IntegralArrayElement read(BitStreamReader reader) throws IOException
        {
<span class="fc" id="L508">            return new ArrayElement.IntArrayElement((int)reader.readBits(numBits));</span>
        }

        @Override
        public void write(BitStreamWriter writer, ArrayElement element) throws IOException
        {
<span class="fc" id="L514">            writer.writeBits(((ArrayElement.IntArrayElement)element).get(), numBits);</span>
<span class="fc" id="L515">        }</span>

        @Override
        public IntegralArrayElement fromBigInteger(BigInteger bigInteger)
        {
<span class="fc" id="L520">            return new ArrayElement.IntArrayElement(bigInteger.intValue());</span>
        }

        private final int numBits;
    }

    /**
     * Array traits for zserio uint32 and bit:32...bit:63 arrays which are mapped to Java long[] array.
     */
    public static final class BitFieldLongArrayTraits extends IntegralArrayTraitsBase
    {
        /**
         * Constructor from number of bits of zserio type.
         *
         * @param numBits Number of bits of zserio type.
         */
        public BitFieldLongArrayTraits(int numBits)
<span class="fc" id="L537">        {</span>
<span class="fc" id="L538">            this.numBits = numBits;</span>
<span class="fc" id="L539">        }</span>

        @Override
        public boolean isBitSizeOfConstant()
        {
<span class="fc" id="L544">            return true;</span>
        }

        @Override
        public int bitSizeOf(ArrayElement element)
        {
<span class="fc" id="L550">            return numBits;</span>
        }

        @Override
        public long initializeOffsets(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L556">            return bitPosition + bitSizeOf(bitPosition, element);</span>
        }

        @Override
        public IntegralArrayElement read(BitStreamReader reader) throws IOException
        {
<span class="fc" id="L562">            return new ArrayElement.LongArrayElement(reader.readBits(numBits));</span>
        }

        @Override
        public void write(BitStreamWriter writer, ArrayElement element) throws IOException
        {
<span class="fc" id="L568">            writer.writeBits(((ArrayElement.LongArrayElement)element).get(), numBits);</span>
<span class="fc" id="L569">        }</span>

        @Override
        public IntegralArrayElement fromBigInteger(BigInteger bigInteger)
        {
<span class="fc" id="L574">            return new ArrayElement.LongArrayElement(bigInteger.longValue());</span>
        }

        private final int numBits;
    }

    /**
     * Array traits for zserio uint64, bit:64 and dynamic bit field arrays which are mapped to
     * Java BigInteger[] array.
     */
    public static final class BitFieldBigIntegerArrayTraits extends IntegralArrayTraitsBase
    {
        /**
         * Constructor from number of bits of zserio type.
         *
         * @param numBits Number of bits of zserio type.
         */
        public BitFieldBigIntegerArrayTraits(int numBits)
<span class="fc" id="L592">        {</span>
<span class="fc" id="L593">            this.numBits = numBits;</span>
<span class="fc" id="L594">        }</span>

        @Override
        public boolean isBitSizeOfConstant()
        {
<span class="fc" id="L599">            return true;</span>
        }

        @Override
        public int bitSizeOf(ArrayElement element)
        {
<span class="fc" id="L605">            return numBits;</span>
        }

        @Override
        public long initializeOffsets(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L611">            return bitPosition + bitSizeOf(bitPosition, element);</span>
        }

        @Override
        public IntegralArrayElement read(BitStreamReader reader) throws IOException
        {
<span class="fc" id="L617">            return new ArrayElement.BigIntegerArrayElement(reader.readBigInteger(numBits));</span>
        }

        @Override
        public void write(BitStreamWriter writer, ArrayElement element) throws IOException
        {
<span class="fc" id="L623">            writer.writeBigInteger(((ArrayElement.BigIntegerArrayElement)element).get(), numBits);</span>
<span class="fc" id="L624">        }</span>

        @Override
        public IntegralArrayElement fromBigInteger(BigInteger bigInteger)
        {
<span class="fc" id="L629">            return new ArrayElement.BigIntegerArrayElement(bigInteger);</span>
        }

        private final int numBits;
    }

    /**
     * Array traits for zserio varint16 arrays which are mapped to Java short[] array.
     */
<span class="fc" id="L638">    public static final class VarInt16ArrayTraits extends IntegralArrayTraitsBase</span>
    {
        @Override
        public boolean isBitSizeOfConstant()
        {
<span class="fc" id="L643">            return false;</span>
        }

        @Override
        public int bitSizeOf(ArrayElement element)
        {
<span class="fc" id="L649">            return BitSizeOfCalculator.getBitSizeOfVarInt16(((ArrayElement.ShortArrayElement)element).get());</span>
        }

        @Override
        public long initializeOffsets(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L655">            return bitPosition + bitSizeOf(bitPosition, element);</span>
        }

        @Override
        public IntegralArrayElement read(BitStreamReader reader) throws IOException
        {
<span class="fc" id="L661">            return new ArrayElement.ShortArrayElement(reader.readVarInt16());</span>
        }

        @Override
        public void write(BitStreamWriter writer, ArrayElement element) throws IOException
        {
<span class="fc" id="L667">            writer.writeVarInt16(((ArrayElement.ShortArrayElement)element).get());</span>
<span class="fc" id="L668">        }</span>

        @Override
        public IntegralArrayElement fromBigInteger(BigInteger bigInteger)
        {
<span class="fc" id="L673">            return new ArrayElement.ShortArrayElement(bigInteger.shortValue());</span>
        }
    }

    /**
     * Array traits for zserio varint32 arrays which are mapped to Java int[] array.
     */
<span class="fc" id="L680">    public static final class VarInt32ArrayTraits extends IntegralArrayTraitsBase</span>
    {
        @Override
        public boolean isBitSizeOfConstant()
        {
<span class="fc" id="L685">            return false;</span>
        }

        @Override
        public int bitSizeOf(ArrayElement element)
        {
<span class="fc" id="L691">            return BitSizeOfCalculator.getBitSizeOfVarInt32(((ArrayElement.IntArrayElement)element).get());</span>
        }

        @Override
        public long initializeOffsets(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L697">            return bitPosition + bitSizeOf(bitPosition, element);</span>
        }

        @Override
        public IntegralArrayElement read(BitStreamReader reader) throws IOException
        {
<span class="fc" id="L703">            return new ArrayElement.IntArrayElement(reader.readVarInt32());</span>
        }

        @Override
        public void write(BitStreamWriter writer, ArrayElement element) throws IOException
        {
<span class="fc" id="L709">            writer.writeVarInt32(((ArrayElement.IntArrayElement)element).get());</span>
<span class="fc" id="L710">        }</span>

        @Override
        public IntegralArrayElement fromBigInteger(BigInteger bigInteger)
        {
<span class="fc" id="L715">            return new ArrayElement.IntArrayElement(bigInteger.intValue());</span>
        }
    }

    /**
     * Array traits for zserio varint64 arrays which are mapped to Java long[] array.
     */
<span class="fc" id="L722">    public static final class VarInt64ArrayTraits extends IntegralArrayTraitsBase</span>
    {
        @Override
        public boolean isBitSizeOfConstant()
        {
<span class="fc" id="L727">            return false;</span>
        }

        @Override
        public int bitSizeOf(ArrayElement element)
        {
<span class="fc" id="L733">            return BitSizeOfCalculator.getBitSizeOfVarInt64(((ArrayElement.LongArrayElement)element).get());</span>
        }

        @Override
        public long initializeOffsets(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L739">            return bitPosition + bitSizeOf(bitPosition, element);</span>
        }

        @Override
        public IntegralArrayElement read(BitStreamReader reader) throws IOException
        {
<span class="fc" id="L745">            return new ArrayElement.LongArrayElement(reader.readVarInt64());</span>
        }

        @Override
        public void write(BitStreamWriter writer, ArrayElement element) throws IOException
        {
<span class="fc" id="L751">            writer.writeVarInt64(((ArrayElement.LongArrayElement)element).get());</span>
<span class="fc" id="L752">        }</span>

        @Override
        public IntegralArrayElement fromBigInteger(BigInteger bigInteger)
        {
<span class="fc" id="L757">            return new ArrayElement.LongArrayElement(bigInteger.longValue());</span>
        }
    }

    /**
     * Array traits for zserio varint arrays which are mapped to Java long[] array.
     */
<span class="fc" id="L764">    public static final class VarIntArrayTraits extends IntegralArrayTraitsBase</span>
    {
        @Override
        public boolean isBitSizeOfConstant()
        {
<span class="fc" id="L769">            return false;</span>
        }

        @Override
        public int bitSizeOf(ArrayElement element)
        {
<span class="fc" id="L775">            return BitSizeOfCalculator.getBitSizeOfVarInt(((ArrayElement.LongArrayElement)element).get());</span>
        }

        @Override
        public long initializeOffsets(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L781">            return bitPosition + bitSizeOf(bitPosition, element);</span>
        }

        @Override
        public IntegralArrayElement read(BitStreamReader reader) throws IOException
        {
<span class="fc" id="L787">            return new ArrayElement.LongArrayElement(reader.readVarInt());</span>
        }

        @Override
        public void write(BitStreamWriter writer, ArrayElement element) throws IOException
        {
<span class="fc" id="L793">            writer.writeVarInt(((ArrayElement.LongArrayElement)element).get());</span>
<span class="fc" id="L794">        }</span>

        @Override
        public IntegralArrayElement fromBigInteger(BigInteger bigInteger)
        {
<span class="fc" id="L799">            return new ArrayElement.LongArrayElement(bigInteger.longValue());</span>
        }
    }

    /**
     * Array traits for zserio varuint16 arrays which are mapped to Java short[] array.
     */
<span class="fc" id="L806">    public static final class VarUInt16ArrayTraits extends IntegralArrayTraitsBase</span>
    {
        @Override
        public boolean isBitSizeOfConstant()
        {
<span class="fc" id="L811">            return false;</span>
        }

        @Override
        public int bitSizeOf(ArrayElement element)
        {
<span class="fc" id="L817">            return BitSizeOfCalculator.getBitSizeOfVarUInt16(((ArrayElement.ShortArrayElement)element).get());</span>
        }

        @Override
        public long initializeOffsets(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L823">            return bitPosition + bitSizeOf(bitPosition, element);</span>
        }

        @Override
        public IntegralArrayElement read(BitStreamReader reader) throws IOException
        {
<span class="fc" id="L829">            return new ArrayElement.ShortArrayElement(reader.readVarUInt16());</span>
        }

        @Override
        public void write(BitStreamWriter writer, ArrayElement element) throws IOException
        {
<span class="fc" id="L835">            writer.writeVarUInt16(((ArrayElement.ShortArrayElement)element).get());</span>
<span class="fc" id="L836">        }</span>

        @Override
        public IntegralArrayElement fromBigInteger(BigInteger bigInteger)
        {
<span class="fc" id="L841">            return new ArrayElement.ShortArrayElement(bigInteger.shortValue());</span>
        }
    }

    /**
     * Array traits for zserio varuint32 arrays which are mapped to Java int[] array.
     */
<span class="fc" id="L848">    public static final class VarUInt32ArrayTraits extends IntegralArrayTraitsBase</span>
    {
        @Override
        public boolean isBitSizeOfConstant()
        {
<span class="fc" id="L853">            return false;</span>
        }

        @Override
        public int bitSizeOf(ArrayElement element)
        {
<span class="fc" id="L859">            return BitSizeOfCalculator.getBitSizeOfVarUInt32(((ArrayElement.IntArrayElement)element).get());</span>
        }

        @Override
        public long initializeOffsets(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L865">            return bitPosition + bitSizeOf(bitPosition, element);</span>
        }

        @Override
        public IntegralArrayElement read(BitStreamReader reader) throws IOException
        {
<span class="fc" id="L871">            return new ArrayElement.IntArrayElement(reader.readVarUInt32());</span>
        }

        @Override
        public void write(BitStreamWriter writer, ArrayElement element) throws IOException
        {
<span class="fc" id="L877">            writer.writeVarUInt32(((ArrayElement.IntArrayElement)element).get());</span>
<span class="fc" id="L878">        }</span>

        @Override
        public IntegralArrayElement fromBigInteger(BigInteger bigInteger)
        {
<span class="fc" id="L883">            return new ArrayElement.IntArrayElement(bigInteger.intValue());</span>
        }
    }

    /**
     * Array traits for zserio varuint64 arrays which are mapped to Java long[] array.
     */
<span class="fc" id="L890">    public static final class VarUInt64ArrayTraits extends IntegralArrayTraitsBase</span>
    {
        @Override
        public boolean isBitSizeOfConstant()
        {
<span class="fc" id="L895">            return false;</span>
        }

        @Override
        public int bitSizeOf(ArrayElement element)
        {
<span class="fc" id="L901">            return BitSizeOfCalculator.getBitSizeOfVarUInt64(((ArrayElement.LongArrayElement)element).get());</span>
        }

        @Override
        public long initializeOffsets(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L907">            return bitPosition + bitSizeOf(bitPosition, element);</span>
        }

        @Override
        public IntegralArrayElement read(BitStreamReader reader) throws IOException
        {
<span class="fc" id="L913">            return new ArrayElement.LongArrayElement(reader.readVarUInt64());</span>
        }

        @Override
        public void write(BitStreamWriter writer, ArrayElement element) throws IOException
        {
<span class="fc" id="L919">            writer.writeVarUInt64(((ArrayElement.LongArrayElement)element).get());</span>
<span class="fc" id="L920">        }</span>

        @Override
        public IntegralArrayElement fromBigInteger(BigInteger bigInteger)
        {
<span class="fc" id="L925">            return new ArrayElement.LongArrayElement(bigInteger.longValue());</span>
        }
    }

    /**
     * Array traits for zserio varuint arrays which are mapped to Java BigInteger[] array.
     */
<span class="fc" id="L932">    public static final class VarUIntArrayTraits extends IntegralArrayTraitsBase</span>
    {
        @Override
        public boolean isBitSizeOfConstant()
        {
<span class="fc" id="L937">            return false;</span>
        }

        @Override
        public int bitSizeOf(ArrayElement element)
        {
<span class="fc" id="L943">            return BitSizeOfCalculator.getBitSizeOfVarUInt(</span>
<span class="fc" id="L944">                    ((ArrayElement.BigIntegerArrayElement)element).get());</span>
        }

        @Override
        public long initializeOffsets(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L950">            return bitPosition + bitSizeOf(bitPosition, element);</span>
        }

        @Override
        public IntegralArrayElement read(BitStreamReader reader) throws IOException
        {
<span class="fc" id="L956">            return new ArrayElement.BigIntegerArrayElement(reader.readVarUInt());</span>
        }

        @Override
        public void write(BitStreamWriter writer, ArrayElement element) throws IOException
        {
<span class="fc" id="L962">            writer.writeVarUInt(((ArrayElement.BigIntegerArrayElement)element).get());</span>
<span class="fc" id="L963">        }</span>

        @Override
        public IntegralArrayElement fromBigInteger(BigInteger bigInteger)
        {
<span class="fc" id="L968">            return new ArrayElement.BigIntegerArrayElement(bigInteger);</span>
        }
    }

    /**
     * Array traits for zserio varsize arrays which are mapped to Java int[] array.
     */
<span class="fc" id="L975">    public static final class VarSizeArrayTraits extends IntegralArrayTraitsBase</span>
    {
        @Override
        public boolean isBitSizeOfConstant()
        {
<span class="fc" id="L980">            return false;</span>
        }

        @Override
        public int bitSizeOf(ArrayElement element)
        {
<span class="fc" id="L986">            return BitSizeOfCalculator.getBitSizeOfVarSize(((ArrayElement.IntArrayElement)element).get());</span>
        }

        @Override
        public long initializeOffsets(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L992">            return bitPosition + bitSizeOf(bitPosition, element);</span>
        }

        @Override
        public IntegralArrayElement read(BitStreamReader reader) throws IOException
        {
<span class="fc" id="L998">            return new ArrayElement.IntArrayElement(reader.readVarSize());</span>
        }

        @Override
        public void write(BitStreamWriter writer, ArrayElement element) throws IOException
        {
<span class="fc" id="L1004">            writer.writeVarSize(((ArrayElement.IntArrayElement)element).get());</span>
<span class="fc" id="L1005">        }</span>

        @Override
        public IntegralArrayElement fromBigInteger(BigInteger bigInteger)
        {
<span class="fc" id="L1010">            return new ArrayElement.IntArrayElement(bigInteger.intValue());</span>
        }
    }

    /**
     * Array traits for zserio float16 arrays which are mapped to Java float[] array.
     */
<span class="fc" id="L1017">    public static final class Float16ArrayTraits implements ArrayTraits</span>
    {
        @Override
        public PackedArrayTraits getPackedArrayTraits()
        {
<span class="fc" id="L1022">            return null;</span>
        }

        @Override
        public boolean isBitSizeOfConstant()
        {
<span class="fc" id="L1028">            return true;</span>
        }

        @Override
        public int bitSizeOf(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L1034">            return 16;</span>
        }

        @Override
        public long initializeOffsets(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L1040">            return bitPosition + bitSizeOf(bitPosition, element);</span>
        }

        @Override
        public ArrayElement read(BitStreamReader reader, int index) throws IOException
        {
<span class="fc" id="L1046">            return new ArrayElement.FloatArrayElement(reader.readFloat16());</span>
        }

        @Override
        public void write(BitStreamWriter writer, ArrayElement element) throws IOException
        {
<span class="fc" id="L1052">            writer.writeFloat16(((ArrayElement.FloatArrayElement)element).get());</span>
<span class="fc" id="L1053">        }</span>
    }

    /**
     * Array traits for zserio float32 arrays which are mapped to Java float[] array.
     */
<span class="fc" id="L1059">    public static final class Float32ArrayTraits implements ArrayTraits</span>
    {
        @Override
        public PackedArrayTraits getPackedArrayTraits()
        {
<span class="fc" id="L1064">            return null;</span>
        }

        @Override
        public boolean isBitSizeOfConstant()
        {
<span class="fc" id="L1070">            return true;</span>
        }

        @Override
        public int bitSizeOf(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L1076">            return 32;</span>
        }

        @Override
        public long initializeOffsets(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L1082">            return bitPosition + bitSizeOf(bitPosition, element);</span>
        }

        @Override
        public ArrayElement read(BitStreamReader reader, int index) throws IOException
        {
<span class="fc" id="L1088">            return new ArrayElement.FloatArrayElement(reader.readFloat32());</span>
        }

        @Override
        public void write(BitStreamWriter writer, ArrayElement element) throws IOException
        {
<span class="fc" id="L1094">            writer.writeFloat32(((ArrayElement.FloatArrayElement)element).get());</span>
<span class="fc" id="L1095">        }</span>
    }

    /**
     * Array traits for zserio float64 arrays which are mapped to Java double[] array.
     */
<span class="fc" id="L1101">    public static final class Float64ArrayTraits implements ArrayTraits</span>
    {
        @Override
        public PackedArrayTraits getPackedArrayTraits()
        {
<span class="fc" id="L1106">            return null;</span>
        }

        @Override
        public boolean isBitSizeOfConstant()
        {
<span class="fc" id="L1112">            return true;</span>
        }

        @Override
        public int bitSizeOf(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L1118">            return 64;</span>
        }

        @Override
        public long initializeOffsets(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L1124">            return bitPosition + bitSizeOf(bitPosition, element);</span>
        }

        @Override
        public ArrayElement read(BitStreamReader reader, int index) throws IOException
        {
<span class="fc" id="L1130">            return new ArrayElement.DoubleArrayElement(reader.readFloat64());</span>
        }

        @Override
        public void write(BitStreamWriter writer, ArrayElement element) throws IOException
        {
<span class="fc" id="L1136">            writer.writeFloat64(((ArrayElement.DoubleArrayElement)element).get());</span>
<span class="fc" id="L1137">        }</span>
    }

    /**
     * Array traits for zserio bytes arrays which are mapped to Java byte[][] array.
     */
<span class="fc" id="L1143">    public static final class BytesArrayTraits implements ArrayTraits</span>
    {
        @Override
        public PackedArrayTraits getPackedArrayTraits()
        {
<span class="fc" id="L1148">            return null;</span>
        }

        @Override
        public boolean isBitSizeOfConstant()
        {
<span class="fc" id="L1154">            return false;</span>
        }

        @SuppressWarnings(&quot;unchecked&quot;)
        @Override
        public int bitSizeOf(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L1161">            return BitSizeOfCalculator.getBitSizeOfBytes(</span>
<span class="fc" id="L1162">                    ((ArrayElement.ObjectArrayElement&lt;byte[]&gt;)element).get());</span>
        }

        @Override
        public long initializeOffsets(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L1168">            return bitPosition + bitSizeOf(bitPosition, element);</span>
        }

        @Override
        public ArrayElement read(BitStreamReader reader, int index) throws IOException
        {
<span class="fc" id="L1174">            return new ArrayElement.ObjectArrayElement&lt;&gt;(reader.readBytes());</span>
        }

        @SuppressWarnings(&quot;unchecked&quot;)
        @Override
        public void write(BitStreamWriter writer, ArrayElement element) throws IOException
        {
<span class="fc" id="L1181">            writer.writeBytes(((ArrayElement.ObjectArrayElement&lt;byte[]&gt;)element).get());</span>
<span class="fc" id="L1182">        }</span>
    }

    /**
     * Array traits for zserio string arrays which are mapped to Java String[] array.
     */
<span class="fc" id="L1188">    public static final class StringArrayTraits implements ArrayTraits</span>
    {
        @Override
        public PackedArrayTraits getPackedArrayTraits()
        {
<span class="fc" id="L1193">            return null;</span>
        }

        @Override
        public boolean isBitSizeOfConstant()
        {
<span class="fc" id="L1199">            return false;</span>
        }

        @SuppressWarnings(&quot;unchecked&quot;)
        @Override
        public int bitSizeOf(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L1206">            return BitSizeOfCalculator.getBitSizeOfString(</span>
<span class="fc" id="L1207">                    ((ArrayElement.ObjectArrayElement&lt;String&gt;)element).get());</span>
        }

        @Override
        public long initializeOffsets(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L1213">            return bitPosition + bitSizeOf(bitPosition, element);</span>
        }

        @Override
        public ArrayElement read(BitStreamReader reader, int index) throws IOException
        {
<span class="fc" id="L1219">            return new ArrayElement.ObjectArrayElement&lt;&gt;(reader.readString());</span>
        }

        @SuppressWarnings(&quot;unchecked&quot;)
        @Override
        public void write(BitStreamWriter writer, ArrayElement element) throws IOException
        {
<span class="fc" id="L1226">            writer.writeString(((ArrayElement.ObjectArrayElement&lt;String&gt;)element).get());</span>
<span class="fc" id="L1227">        }</span>
    }

    /**
     * Array traits for zserio bool arrays which are mapped to Java boolean[] array.
     */
<span class="fc" id="L1233">    public static final class BoolArrayTraits implements ArrayTraits</span>
    {
        @Override
        public PackedArrayTraits getPackedArrayTraits()
        {
<span class="fc" id="L1238">            return null;</span>
        }

        @Override
        public boolean isBitSizeOfConstant()
        {
<span class="fc" id="L1244">            return true;</span>
        }

        @Override
        public int bitSizeOf(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L1250">            return 1;</span>
        }

        @Override
        public long initializeOffsets(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L1256">            return bitPosition + bitSizeOf(bitPosition, element);</span>
        }

        @Override
        public ArrayElement read(BitStreamReader reader, int index) throws IOException
        {
<span class="fc" id="L1262">            return new ArrayElement.BooleanArrayElement(reader.readBool());</span>
        }

        @Override
        public void write(BitStreamWriter writer, ArrayElement element) throws IOException
        {
<span class="fc" id="L1268">            writer.writeBool(((ArrayElement.BooleanArrayElement)element).get());</span>
<span class="fc" id="L1269">        }</span>
    }

    /**
     * Array traits for zserio extern bit buffer arrays which are mapped to Java BitBuffer[] array.
     */
<span class="fc" id="L1275">    public static final class BitBufferArrayTraits implements ArrayTraits</span>
    {
        @Override
        public PackedArrayTraits getPackedArrayTraits()
        {
<span class="fc" id="L1280">            return null;</span>
        }

        @Override
        public boolean isBitSizeOfConstant()
        {
<span class="fc" id="L1286">            return false;</span>
        }

        @SuppressWarnings(&quot;unchecked&quot;)
        @Override
        public int bitSizeOf(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L1293">            return BitSizeOfCalculator.getBitSizeOfBitBuffer(</span>
<span class="fc" id="L1294">                    ((ArrayElement.ObjectArrayElement&lt;BitBuffer&gt;)element).get());</span>
        }

        @Override
        public long initializeOffsets(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L1300">            return bitPosition + bitSizeOf(bitPosition, element);</span>
        }

        @Override
        public ArrayElement read(BitStreamReader reader, int index) throws IOException
        {
<span class="fc" id="L1306">            return new ArrayElement.ObjectArrayElement&lt;&gt;(reader.readBitBuffer());</span>
        }

        @SuppressWarnings(&quot;unchecked&quot;)
        @Override
        public void write(BitStreamWriter writer, ArrayElement element) throws IOException
        {
<span class="fc" id="L1313">            writer.writeBitBuffer(((ArrayElement.ObjectArrayElement&lt;BitBuffer&gt;)element).get());</span>
<span class="fc" id="L1314">        }</span>
    }

    /**
     * Array traits for zserio object arrays (without writer part) which are mapped to Java zserio object array.
     */
    public static class ObjectArrayTraits&lt;E extends SizeOf&gt; implements ArrayTraits
    {
        /**
         * Constructor from element factory.
         *
         * @param elementFactory Element factory to construct from.
         */
        public ObjectArrayTraits(ElementFactory&lt;E&gt; elementFactory)
<span class="fc" id="L1328">        {</span>
<span class="fc" id="L1329">            this.elementFactory = elementFactory;</span>
<span class="fc" id="L1330">        }</span>

        @Override
        public PackedArrayTraits getPackedArrayTraits()
        {
<span class="fc" id="L1335">            return null;</span>
        }

        @Override
        public boolean isBitSizeOfConstant()
        {
<span class="fc" id="L1341">            return false;</span>
        }

        @SuppressWarnings(&quot;unchecked&quot;)
        @Override
        public int bitSizeOf(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L1348">            return ((ArrayElement.ObjectArrayElement&lt;E&gt;)element).get().bitSizeOf(bitPosition);</span>
        }

        @Override
        public long initializeOffsets(long bitPosition, ArrayElement element)
        {
<span class="nc" id="L1354">            throw new UnsupportedOperationException(</span>
                    &quot;ArrayTraits: initializeOffsets is not implemented for read only ObjectArrayTraits!&quot;);
        }

        @Override
        public ArrayElement read(BitStreamReader reader, int index) throws IOException
        {
<span class="fc" id="L1361">            return new ArrayElement.ObjectArrayElement&lt;&gt;(elementFactory.create(reader, index));</span>
        }

        @Override
        public void write(BitStreamWriter writer, ArrayElement element) throws IOException
        {
<span class="nc" id="L1367">            throw new UnsupportedOperationException(</span>
                    &quot;ArrayTraits: write is not implemented for read only ObjectArrayTraits!&quot;);
        }

        private final ElementFactory&lt;E&gt; elementFactory;
    }

    /**
     * Array traits for zserio object arrays (with writer part) which are mapped to Java zserio object array.
     */
    public static final class WriteObjectArrayTraits&lt;E extends Writer &amp; SizeOf&gt;
            extends ObjectArrayTraits&lt;E&gt;
    {
        /**
         * Constructor from element factory.
         *
         * @param elementFactory Element factory to construct from.
         */
        public WriteObjectArrayTraits(ElementFactory&lt;E&gt; elementFactory)
        {
<span class="fc" id="L1387">            super(elementFactory);</span>
<span class="fc" id="L1388">        }</span>

        @SuppressWarnings(&quot;unchecked&quot;)
        @Override
        public long initializeOffsets(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L1394">            return ((ArrayElement.ObjectArrayElement&lt;E&gt;)element).get().initializeOffsets(bitPosition);</span>
        }

        @SuppressWarnings(&quot;unchecked&quot;)
        @Override
        public void write(BitStreamWriter writer, ArrayElement element) throws IOException
        {
<span class="fc" id="L1401">            ((ArrayElement.ObjectArrayElement&lt;E&gt;)element).get().write(writer);</span>
<span class="fc" id="L1402">        }</span>
    }

    /**
     * Array traits for zserio packable object arrays (without writer part) which are mapped to Java zserio
     * object array.
     */
    public static class PackableObjectArrayTraits&lt;E extends PackableSizeOf&gt; implements ArrayTraits
    {
        /**
         * Constructor from element factory.
         *
         * @param elementFactory Element factory to construct from.
         */
        public PackableObjectArrayTraits(PackableElementFactory&lt;E&gt; elementFactory)
<span class="fc" id="L1417">        {</span>
<span class="fc" id="L1418">            this.elementFactory = elementFactory;</span>
<span class="fc" id="L1419">        }</span>

        @Override
        public PackedArrayTraits getPackedArrayTraits()
        {
<span class="nc" id="L1424">            return new PackedArrayTraits.ObjectPackedArrayTraits&lt;&gt;(getElementFactory());</span>
        }

        @Override
        public boolean isBitSizeOfConstant()
        {
<span class="fc" id="L1430">            return false;</span>
        }

        @SuppressWarnings(&quot;unchecked&quot;)
        @Override
        public int bitSizeOf(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L1437">            return ((ArrayElement.ObjectArrayElement&lt;E&gt;)element).get().bitSizeOf(bitPosition);</span>
        }

        @Override
        public long initializeOffsets(long bitPosition, ArrayElement element)
        {
<span class="nc" id="L1443">            throw new UnsupportedOperationException(</span>
                    &quot;ArrayTraits: initializeOffsets is not implemented for read only ObjectArrayTraits!&quot;);
        }

        @Override
        public ArrayElement read(BitStreamReader reader, int index) throws IOException
        {
<span class="fc" id="L1450">            return new ArrayElement.ObjectArrayElement&lt;&gt;(elementFactory.create(reader, index));</span>
        }

        @Override
        public void write(BitStreamWriter writer, ArrayElement element) throws IOException
        {
<span class="nc" id="L1456">            throw new UnsupportedOperationException(</span>
                    &quot;ArrayTraits: write is not implemented for read only ObjectArrayTraits!&quot;);
        }

        /**
         * Gets the element factory.
         *
         * @return Element factory.
         */
        protected PackableElementFactory&lt;E&gt; getElementFactory()
        {
<span class="fc" id="L1467">            return elementFactory;</span>
        }

        private final PackableElementFactory&lt;E&gt; elementFactory;
    }

    /**
     * Array traits for zserio packable object arrays (with writer part) which are mapped to Java zserio
     * object array.
     */
    public static final class WritePackableObjectArrayTraits&lt;E extends PackableWriter &amp; PackableSizeOf&gt;
            extends PackableObjectArrayTraits&lt;E&gt;
    {
        /**
         * Constructor from element factory.
         *
         * @param elementFactory Element factory to construct from.
         */
        public WritePackableObjectArrayTraits(PackableElementFactory&lt;E&gt; elementFactory)
        {
<span class="fc" id="L1487">            super(elementFactory);</span>
<span class="fc" id="L1488">        }</span>

        @Override
        public PackedArrayTraits getPackedArrayTraits()
        {
<span class="fc" id="L1493">            return new PackedArrayTraits.WriteObjectPackedArrayTraits&lt;&gt;(getElementFactory());</span>
        }

        @SuppressWarnings(&quot;unchecked&quot;)
        @Override
        public long initializeOffsets(long bitPosition, ArrayElement element)
        {
<span class="fc" id="L1500">            return ((ArrayElement.ObjectArrayElement&lt;E&gt;)element).get().initializeOffsets(bitPosition);</span>
        }

        @SuppressWarnings(&quot;unchecked&quot;)
        @Override
        public void write(BitStreamWriter writer, ArrayElement element) throws IOException
        {
<span class="fc" id="L1507">            ((ArrayElement.ObjectArrayElement&lt;E&gt;)element).get().write(writer);</span>
<span class="fc" id="L1508">        }</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>